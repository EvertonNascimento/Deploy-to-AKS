trigger:
- main
resources:
- repo: self

variables:
  imagerepo: sampleapp
  tag: '$(Build.BuildId)'

stages:
  - stage: Build
    displayName: Build image
    jobs:
      - job: Build
        displayName: Build
        pool:
          vmImage: ubuntu-latest
        steps:
        - task: Docker@2
          displayName: build an image
          inputs:
            command: 'buildAndPush'
            Dockerfile: '**/Dockerfile'
